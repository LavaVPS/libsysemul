version: 2
jobs:
  build:
    docker:
      - image: debian:stretch
    steps:
      - run:
          name: Install git and make
          command: apt-get update -qq && apt-get install -y git make
      - run:
          name: Checkout
          command: pwd && cd /root/project && pwd && git clone "$CIRCLE_REPOSITORY_URL" .
      - run:
          name: Build before
          command: make build_before
      - run:
          name: Build package
          command: make pkg-build
      - run:
          name: Running tests
          command: make pkg-test
